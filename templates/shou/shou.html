{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <title>网格交流论坛</title>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.js"></script>
    <link rel="stylesheet" href="{% static 'css/style2.css' %}">
    <script>
        $(document).ready(function () {
            // 获取验证码的函数
            function getCaptcha() {
                var timestamp = new Date().getTime();  // 生成当前时间戳
                var url = "/refresh_captcha/?timestamp=" + timestamp;  // 将时间戳添加到 URL 中
                $.getJSON(url, function (result) {
                    $('#id_captcha').attr('src', result['image_url']);
                    $('#id_captcha_0').val(result['hashkey'])
                });
            }

            // 页面加载完成后立即获取一次验证码
            getCaptcha();

            // 点击验证码图片时获取新的验证码
            $('.captcha').click(function () {
                getCaptcha();
            });
        });
    </script>

    <style>
        .centered {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 3;
        }

        #chart-container {
            position: relative;
        }


        /* 修改的样式结束 */
    </style>
</head>
<body>


<div class="container">
    <div id="chart-container">
    </div>

    <div class="glow-box centered"
         style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <h2 class="text-center mt-5" style="color: #333; font-weight: 600; margin-bottom: 2rem;">
            业务运营与IT支撑中心</h2>
        <div class="row justify-content-center">
            <div class="col-4">
                <form action="/test/" method="post"
                      style="background: #fff; border-radius: 10px; padding: 30px; box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.1); transition: all 0.3s;">
                    {% csrf_token %}
                    <div class="mb-3" style="margin-bottom: 2rem !important;">
                        <input type="text" class="form-control" name="captcha" placeholder="验证码"
                               style="border: none; border-radius: 0; box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1); padding: 1.25rem; font-size: 1.1rem; transition: all 0.3s;">
                    </div>

                    <div class="mb-3 text-center" style="margin-bottom: 1.5rem !important;">
                        <a href="#" rel="external nofollow" class="captcha">
                            <img src="{{ captcha.image_url }}" alt="点击切换" id="id_captcha" width="130" height="53"
                                 style="border-radius: 4px; transition: all 0.3s;">
                        </a>
                    </div>

                    <input value="{{ captcha.hashkey }}" name="hashkey" type="hidden" id="id_captcha_0">

                    <button type="submit" class="btn btn-primary btn-block"
                            style="background: linear-gradient(to right, #537895, #09203f); border: none; color: #fff; padding: 0.75rem 1.5rem; border-radius: 20px; font-size: 1.1rem; box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1); transition: all 0.3s;">
                        提交
                    </button>
                </form>
            </div>
        </div>
    </div>

</div>

<script>
    $(document).ready(function () {


        $(".captcha").hover(function () {
            $("#id_captcha").css("box-shadow", "0px 10px 20px rgba(0, 0, 0, 0.1)");
        }, function () {
            $("#id_captcha").css("box-shadow", "none");
        });

        $(".btn").hover(function () {
            $(this).css("background", "#1a1715");
        }, function () {
            $(this).css("background", "rgba(19,18,18,0.55)");
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<script src="{% static 'jquery/index2.js' %}"></script>
</body>
</html>
