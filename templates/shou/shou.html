<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Coming Soon - Start Bootstrap Theme</title>
    <link rel="icon" type="image/x-icon" href="../../static/bootstrap/assets/favicon.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.js"></script>
    <!-- Google fonts-->

    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../../static/bootstrap/css/styles.css" rel="stylesheet"/>

    <script>
        $(document).ready(function () {
            // 获取验证码的函数
            function getCaptcha() {
                var timestamp = new Date().getTime();  // 生成当前时间戳
                var url = "/refresh_captcha/?timestamp=" + timestamp;  // 将时间戳添加到 URL 中
                $.getJSON(url, function (result) {
                    $('#id_captcha').attr('src', result['image_url']);
                    $('#id_captcha_0').val(result['hashkey'])
                });
            }

            // 页面加载完成后立即获取一次验证码
            getCaptcha();

            // 点击验证码图片时获取新的验证码
            $('.captcha').click(function () {
                getCaptcha();
            });
        });
    </script>
</head>
<body>
<!-- Background Video-->
<video class="bg-video" playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
    <source src="../../static/bootstrap/assets/mp4/bg.mp4" type="video/mp4"/>
</video>
<!-- Masthead-->
<div class="masthead">
    <div class="masthead-content text-white">
        <div class="container-fluid px-4 px-lg-0">
            <h1 class="fst-italic lh-1 mb-4">网格交流论坛</h1>
            <p class="mb-5">欢迎加入网格交流论坛，希望这里可以给你提供关于网格的工作思路与解决方法</p>
            <!-- * * * * * * * * * * * * * * *-->
            <!-- * * SB Forms Contact Form * *-->
            <!-- * * * * * * * * * * * * * * *-->
            <!-- This form is pre-integrated with SB Forms.-->
            <!-- To make this form functional, sign up at-->
            <!-- https://startbootstrap.com/solution/contact-forms-->
            <form action="/test/" method="post">
                {% csrf_token %}

                <div class="row input-group-newsletter">
                    <div class="form-floating mb-3"><input type="text" name="captcha" placeholder="验证码"></div>
                    <div class="weui-cell__ft">
                        <a href="#" rel="external nofollow" class="captcha">
                            <img src="{{ captcha.image_url }}" alt="点击切换" id="id_captcha" width="130" height="53">
                        </a>
                    </div>
                    <div class="form-floating mb-3"><input value="{{ captcha.hashkey }}" name="hashkey" type="hidden"
                                                           id="id_captcha_0"></div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-primary btn-block">提交</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Social Icons-->
<!-- For more icon options, visit https://fontawesome.com/icons?d=gallery&p=2&s=brands-->

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="../../static/bootstrap/js/scripts.js"></script>
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<!-- * *                               SB Forms JS                               * *-->
<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</body>
</html>
