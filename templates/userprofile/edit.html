{% extends "base.html" %}
{% load static %}
{% block title %}
  用户个人资料
{% endblock title %}
{% block content %}
<div class="container py-5">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card shadow">
        <div class="card-body">
          <div class="text-center mb-4">
            <h2 class="text-uppercase">用户个人资料</h2>
            <p class="lead">更新您的个人信息</p>
          </div>
          <form method="post" action="." enctype="multipart/form-data">  <!-- 添加 enctype 属性 -->
            {% csrf_token %}
            <div class="mb-3">
              <label for="username" class="form-label">用户名</label>
              <input type="text" class="form-control" id="username" name="username" value="{{ user.username }}" readonly>
            </div>
            <div class="mb-3">
              <label for="phone" class="form-label">电话</label>
              <input type="tel" class="form-control" id="phone" name="phone" value="{{ profile.phone }}">
            </div>
            <div class="mb-3">
              <label for="bio" class="form-label">个人简介</label>
              <textarea class="form-control" id="bio" name="bio" rows="4">{{ profile.bio }}</textarea>
            </div>
            <div class="mb-3">
              <label for="avatar" class="form-label">头像</label>
              <input type="file" class="form-control" id="avatar" name="avatar" accept="image/*">
              {% if profile.avatar %}
              <div class="mt-2">
                <img src="{{ profile.avatar.url }}" id="avatarPreview" width="100" alt="头像预览">  <!-- 在这里预览图片 -->
              </div>
              {% endif %}
            </div>
            <div class="mb-3">
              <label for="department" class="form-label">部门</label>
              <input type="text" class="form-control" id="department" name="department" value="{{ profile.department }}" readonly>
            </div>
            <div class="mb-3">
              <label for="team" class="form-label">团队</label>
              <input type="text" class="form-control" id="team" name="team" value="{{ profile.team }}" readonly>
            </div>
            <div class="d-flex justify-content-end">
              <button type="submit" class="btn btn-primary">更新个人资料</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
